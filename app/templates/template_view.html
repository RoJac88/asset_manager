{% extends "base.html" %}

{% block app_content %}
{% if person != None %}
<div class="container">
  <div class="row">
    <div class="media">
      <div class="media-left media-top">
        <img src="{{ url_for('static', filename='word.png') }}" class="media-object" width=92 height=92>
      </div>
      <div class="media-body">
    	   <h2 class="media-heading">{{ template.name }}</h2>
         <p>{{ template.description }}</p>
       </div>
     </div>
  </div>
  <div class="row">
  	<table class="table table-striped table-condensed">
      <thead>
    		<tr>
    			<th>Attribute</th>
    			<th>Value</th>
    		</tr>
      </thead>
  		<tr>
  			<td>ID</td>
  			<td>{{ template.id }}</td>
  		</tr>
      <tr>
        <td>Format</td>
        <td>{{ template.file_path[-4:].upper() }}</td>
      </tr>
  		<tr>
  			<td>Created by: </td>
  			<td>{{ template.author }}</td>
  		</tr>
  		<tr>
  			<td>Creation time: </td>
  			<td>{{ moment(template.timestamp).format('LLLL') }}</td>
  		</tr>
  		<tr>
  			<td>Documents generated: </td>
  			<td>{{ template.docs_generated }}</td>
  		</tr>
  		<tr>
  			<td>Last edit time: </td>
  			<td>{{ moment(template.latest_use).fromNow() }}</td>
  		</tr>
  	</table>
  </div>
  <div class="row">
    {% if fields.first() == None %}
    <div class="col-sm-2 bg-danger">
      <h3>No mail merge fields detected!</h3>
      <p>Reupload with merge fields</p>
    </div>
    {% else %}
    <div class="col-sm-2 bg-success">
      <table class="table table-condensed">
        <thead>
          <tr>
            <th>Fields Detected:</th>
          </tr>
        </thead>
        {% for field in fields %}
        {% include '_field.html' %}
    		{% endfor %}
      </table>
    </div>
    {% endif %}
  </div>
{% endif %}
{% endblock %}
